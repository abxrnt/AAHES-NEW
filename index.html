<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AAHES | CEE Guide</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@800&family=Bebas+Neue&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #f0fdfa 0%, #e6f7ff 100%);
      color: #1f2937;
      overflow-x: hidden;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-up { opacity: 0; animation: fadeUp 0.7s ease-out forwards; }

    nav {
      background: linear-gradient(to right, #064e3b, #047857, #10b981);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.15);
    }
    .nav-link {
      position: relative;
      padding: 0.5rem 1rem;
      transition: color 0.3s ease;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 0%;
      height: 2px;
      background: white;
      transition: all 0.3s ease;
    }
    .nav-link:hover::after,
    .nav-link.active::after { width: 100%; }

    .glass {
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(16,185,129,0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .glass:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(16,185,129,0.3);
    }

    .btn-green {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: white;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-green:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(34,197,94,0.5);
    }

    footer {
      background: #f1fdf7;
      border-top: 1px solid #d1fae5;
    }

    /* ROUTE VISIBILITY */
    .route { display: none; }
    .route.active { display: block; animation: fadeUp 0.6s ease-out forwards; }
  </style>
</head>

<body class="flex flex-col min-h-screen">
  <!-- Navbar -->
  <nav class="navbar text-white flex items-center justify-between px-4 md:px-10 py-2 sticky top-0 z-50 shadow-lg rounded-b-xl">
    <div class="flex items-center gap-2">
      <img src="logo.jpeg" alt="logo" class="w-8 h-8 rounded-full border-2 border-gray-500 shadow-md" />
      <h1 class="text-2xl font-bold" style="font-family: 'Bebas Neue', sans-serif;">AAHES - CEE Guide</h1>
    </div>

    <button id="menuBtn" class="md:hidden text-white text-2xl">☰</button>

    <ul id="navLinks" class="hidden md:flex gap-3 text-sm items-center ml-auto">
      <li><a href="#/" class="nav-link active">Home</a></li>
      <li><a href="#/about" class="nav-link">About Us</a></li>
      <li><a href="#/cutoffs" class="nav-link">Cutoffs</a></li>
      <li><a href="#/syllabus" class="nav-link">Syllabus</a></li>
      <li><a href="#/contact" class="nav-link">Contact</a></li>
    </ul>
  </nav>

  <!-- MOBILE MENU -->
  <ul id="mobileMenu" class="md:hidden hidden bg-emerald-900 text-white text-center py-2">
    <li><a href="#/" class="block py-2 nav-link">Home</a></li>
    <li><a href="#/about" class="block py-2 nav-link">About Us</a></li>
    <li><a href="#/cutoffs" class="block py-2 nav-link">Cutoffs</a></li>
    <li><a href="#/syllabus" class="block py-2 nav-link">Syllabus</a></li>
    <li><a href="#/contact" class="block py-2 nav-link">Contact</a></li>
  </ul>

  <!-- ROUTES -->
  <main class="flex-grow">

    <!-- HOME -->
    <section id="route-home" class="route active max-w-7xl mx-auto px-4 md:px-8 py-16">
      <h2 class="text-4xl font-bold text-emerald-700 mb-4">Welcome to AAHES - CEE Guide</h2>
      <p class="text-gray-700 mb-6 max-w-3xl">Your comprehensive platform for Assam CEE resources — explore college cutoffs, exam syllabus, preparation guides, and admission updates, all in one place.</p>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="glass p-6 rounded-2xl">
          <h3 class="text-xl font-bold text-emerald-700 mb-2">Accurate Cutoffs</h3>
          <p>View reliable and official CEE cutoff data from ASTU’s verified sources.</p>
        </div>
        <div class="glass p-6 rounded-2xl">
          <h3 class="text-xl font-bold text-emerald-700 mb-2">Study Resources</h3>
          <p>Find detailed syllabus, previous year papers, and expert preparation tips.</p>
        </div>
        <div class="glass p-6 rounded-2xl">
          <h3 class="text-xl font-bold text-emerald-700 mb-2">Stay Updated</h3>
          <p>Track the latest announcements, notifications, and round-wise updates.</p>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="route-about" class="route max-w-7xl mx-auto px-4 md:px-8 py-20">
      <h2 class="text-3xl font-bold text-emerald-800 mb-4">About AAHES</h2>
      <p class="text-gray-600 max-w-3xl">AAHES (Assam Academic Hub for Engineering Students) is a student-led initiative dedicated to providing transparent, data-backed insights into the Common Entrance Examination (CEE). We aim to empower aspirants through authentic resources and tools.</p>
    </section>

    <!-- CUTOFFS -->
    <section id="route-cutoffs" class="route max-w-7xl mx-auto px-4 md:px-8 py-20">
      <h2 class="text-3xl font-bold text-emerald-800 mb-4">CEE Cutoff Ranks & Marks</h2>
      <p class="text-gray-600 mb-10">Select filters to view round-wise cutoff ranks and marks from official ASTU data.</p>

      <!-- Filter -->
      <form id="filterForm" class="glass p-4 rounded-2xl w-full max-w-4xl grid gap-2 md:grid-cols-4 mb-12">
        <div>
          <label class="text-gray-800 mb-1 font-semibold">College</label>
          <select id="college" class="p-3 rounded-lg text-gray-800 w-full">
            <option value="">Select College</option>
            <option value="AEC">AEC</option>
            <option value="JEC">JEC</option>
            <option value="JIST">JIST</option>
            <option value="BBEC">BBEC</option>
            <option value="GEC">GEC</option>
            <option value="BVEC">BVEC</option>
            <option value="DEC">DEC</option>
          </select>
        </div>

        <div>
          <label class="text-gray-800 mb-1 font-semibold">Branch</label>
          <select id="branch" class="p-3 rounded-lg text-gray-800 w-full">
            <option value="">Select Branch</option>
          </select>
        </div>

        <div>
          <label class="text-gray-800 mb-1 font-semibold">Category</label>
          <select id="category" class="p-3 rounded-lg text-gray-800 w-full">
            <option value="">Select Category</option>
            <option value="GEN">GEN</option>
            <option value="OBC">OBC/MOBC</option>
            <option value="SC">SC</option>
            <option value="STP">STP</option>
            <option value="STH">STH</option>
          </select>
        </div>

        <button type="submit" class="btn-green px-6 py-3 rounded-lg font-semibold w-full md:w-auto">Submit</button>
      </form>

      <div id="result" class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto"></div>
    </section>

    <!-- SYLLABUS -->
    <section id="route-syllabus" class="route max-w-7xl mx-auto px-4 md:px-8 py-20">
      <h2 class="text-3xl font-bold text-emerald-800 mb-4">CEE Syllabus</h2>
      <p class="text-gray-600">Detailed subject-wise syllabus will be updated here soon.</p>
    </section>

    <!-- CONTACT -->
    <section id="route-contact" class="route max-w-7xl mx-auto px-4 md:px-8 py-20">
      <h2 class="text-3xl font-bold text-emerald-800 mb-4">Contact Us</h2>
      <p class="text-gray-600 mb-6">For queries, suggestions, or collaborations, reach out to the AAHES team.</p>
      <form class="glass p-6 rounded-2xl max-w-lg">
        <input type="text" placeholder="Your Name" class="w-full mb-3 p-3 rounded-lg border" />
        <input type="email" placeholder="Email" class="w-full mb-3 p-3 rounded-lg border" />
        <textarea placeholder="Message" rows="4" class="w-full p-3 rounded-lg border"></textarea>
        <button class="btn-green px-6 py-2 mt-4 rounded-lg">Send Message</button>
      </form>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="text-center py-8 mt-auto">
    <div class="max-w-4xl mx-auto">
      <p class="font-semibold text-gray-800">Designed & Developed by</p>
      <p class="text-gray-600 mb-3">Abishrant Shandilya (UI/UX & Frontend) <br> Abhilesh Sharma (Database Administrator)</p>
      <p class="text-gray-500">© 2025 AAHES | All Rights Reserved</p>
    </div>
  </footer>

  <!-- JS -->
  <script type="module">
    // Firebase Imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBOVl1hdmprJXpgdN_sNTO3FsNePD_zNZY",
      authDomain: "aahes-cee-cutoffs.firebaseapp.com",
      projectId: "aahes-cee-cutoffs",
      storageBucket: "aahes-cee-cutoffs.firebasestorage.app",
      messagingSenderId: "706066626405",
      appId: "1:706066626405:web:0d254ab82beb288108938c"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // SPA ROUTER
    const routes = document.querySelectorAll(".route");
    const navLinks = document.querySelectorAll(".nav-link");

    function showRoute() {
      const hash = location.hash || "#/";
      routes.forEach(r => r.classList.remove("active"));
      navLinks.forEach(l => l.classList.remove("active"));

      const target = document.querySelector(`#route-${hash.replace("#/", "") || "home"}`);
      const link = document.querySelector(`a[href="${hash}"]`);
      if (target) target.classList.add("active");
      if (link) link.classList.add("active");
    }

    window.addEventListener("hashchange", showRoute);
    window.addEventListener("load", showRoute);

    // MOBILE MENU
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    menuBtn.addEventListener("click", () => mobileMenu.classList.toggle("hidden"));
    mobileMenu.querySelectorAll("a").forEach(a => a.addEventListener("click", () => mobileMenu.classList.add("hidden")));

    // FIREBASE CUTOFFS
    let cutoffData = [];
    async function loadCutoffs() {
      const querySnapshot = await getDocs(collection(db, "cutoffs"));
      cutoffData = querySnapshot.docs.map(doc => doc.data());
      console.log("✅ Loaded cutoffs:", cutoffData);
    }
    await loadCutoffs();

    const form = document.getElementById("filterForm");
    const result = document.getElementById("result");

    document.getElementById("college").addEventListener("change", e => {
      const selectedCollege = e.target.value;
      const branchSelect = document.getElementById("branch");
      branchSelect.innerHTML = `<option value="">Select Branch</option>`;
      if (!selectedCollege) return;

      const availableBranches = [...new Set(
        cutoffData.filter(d => d.college === selectedCollege).map(d => d.branch)
      )];
      availableBranches.forEach(branch => {
        const opt = document.createElement("option");
        opt.value = branch;
        opt.textContent = branch;
        branchSelect.appendChild(opt);
      });
    });

    form.addEventListener("submit", e => {
      e.preventDefault();
      const college = document.getElementById("college").value;
      const branch = document.getElementById("branch").value;
      const cat = document.getElementById("category").value;

      if (!college || !branch || !cat) {
        result.innerHTML = `<p class='col-span-3 text-red-500 font-semibold'>⚠️ Please fill all fields.</p>`;
        return;
      }

      const availableRounds = ["1", "2", "3"].filter(r =>
        cutoffData.some(d => d.college === college && d.branch === branch && d.cat === cat && d.round === r)
      );

      if (availableRounds.length === 0) {
        result.innerHTML = `<div class='text-center text-gray-600 mt-8'>
          No data found for ${college} - ${branch} (${cat})
        </div>`;
        return;
      }

      let html = "";
      availableRounds.forEach(round => {
        const match = cutoffData.find(d =>
          d.college === college && d.branch === branch && d.cat === cat && d.round === round
        );
        html += `
          <div class="glass p-6 rounded-2xl shadow-lg fade-up">
            <h3 class="text-2xl font-bold text-emerald-700 mb-2">Round ${round}</h3>
            <p><strong>College:</strong> ${match.college}</p>
            <p><strong>Branch:</strong> ${match.branch}</p>
            <p><strong>Category:</strong> ${match.cat}</p>
            <p class="text-3xl font-extrabold text-emerald-800 mb-1">Closing Rank: ${match.close}</p>
            <p class="text-2xl font-bold text-emerald-700 mt-2">Marks: ${match.marks}</p>
          </div>`;
      });

      result.innerHTML = html;
      document.querySelectorAll(".fade-up").forEach((el, i) => el.style.animationDelay = `${i * 0.1}s`);
    });
  </script>
</body>
</html>
